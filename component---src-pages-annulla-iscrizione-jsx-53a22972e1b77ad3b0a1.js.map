{"version":3,"file":"component---src-pages-annulla-iscrizione-jsx-53a22972e1b77ad3b0a1.js","mappings":"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","sources":["webpack://padigitale2026/./src/components/hero/Hero.jsx","webpack://padigitale2026/./src/layouts/UnsubscribePage.jsx","webpack://padigitale2026/./src/pages/annulla-iscrizione.jsx"],"sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\n\nexport const Hero = ({\n  bgColor = '',\n  xPadding = true,\n  className,\n  yPaddingXLScreen = true,\n  Tag = 'div',\n  ariaLabelledBy,\n  children,\n}) => {\n  const heroClasses = classNames(\n    'py-5',\n    {\n      'bg-primary': bgColor === 'primary',\n      'lightgrey-bg-a2': bgColor === 'light',\n    },\n    className\n  );\n  const containerClass = classNames('container', {\n    'py-3': yPaddingXLScreen,\n    'px-3': xPadding,\n  });\n  return (\n    <div className={heroClasses}>\n      <Tag className={containerClass} aria-labelledby={ariaLabelledBy}>\n        {children}\n      </Tag>\n    </div>\n  );\n};\n\nHero.propTypes = {\n  bgColor: PropTypes.oneOf(['primary', 'light']),\n  xPadding: PropTypes.bool,\n  yPaddingXLScreen: PropTypes.bool,\n  children: PropTypes.node.isRequired,\n  className: PropTypes.string,\n  ariaLabelledBy: PropTypes.string,\n  Tag: PropTypes.string,\n};\n","import React, { useCallback, useReducer, useEffect } from 'react';\nimport { graphql, Link, useStaticQuery } from 'gatsby';\nimport PropTypes from 'prop-types';\nimport { Button } from 'design-react-kit';\nimport { createUseStyles } from 'react-jss';\nimport { Hero } from '../components/hero/Hero';\nimport { SEO } from '../components/SEO';\nimport content from '../../contents/unsubscribe-page/unsubscribe.yml';\nimport seo from '../../contents/seo.yml';\n\nconst { title: seoTitle, description: seoDescription } = seo.unsubscribePage;\n\nconst useStyles = createUseStyles({\n  title: {\n    fontSize: '1.5rem',\n    fontWeight: '700',\n    color: '#33485C',\n    marginTop: '1.04rem',\n\n    '& svg': {\n      marginLeft: '8px',\n    },\n  },\n  bodyText: {\n    fontSize: '1rem',\n    color: '#33485C',\n    lineHeight: '1.389rem',\n    margin: '20px 0 30px 0',\n  },\n  button: {\n    composes: 'btn text-uppercase btn-primary mb-5',\n    minWidth: '11.111rem',\n  },\n});\n\nconst query = graphql`\n  query {\n    site {\n      siteMetadata {\n        apiUrl\n      }\n    }\n  }\n`;\n\n// use custom hook\nconst INITIAL = 'initial';\nconst LOADING = 'loading';\nconst SUCCESS = 'success';\nconst ERROR = 'error';\n\nconst reducer = (state, { type, payload }) => {\n  if (type === INITIAL) {\n    return { status: INITIAL };\n  }\n  if (type === LOADING) {\n    return { status: LOADING, data: payload };\n  }\n  if (type === ERROR) {\n    return { status: ERROR, data: payload };\n  }\n  if (type === SUCCESS) {\n    return { status: SUCCESS, data: payload };\n  }\n  return state;\n};\n\nexport const UnsubscribePage = ({ location }) => {\n  const classes = useStyles();\n  const params = new URLSearchParams(location.search);\n  const address = params.get('address');\n  const uuid = params.get('uuid');\n  const {\n    site: {\n      siteMetadata: { apiUrl },\n    },\n  } = useStaticQuery(query);\n\n  const initState = {\n    status: LOADING,\n  };\n\n  const [state, dispatch] = useReducer(reducer, initState);\n\n  useEffect(() => {\n    if (!uuid || !address) {\n      dispatch({ type: ERROR, payload: {} });\n    } else {\n      dispatch({ type: INITIAL, payload: {} });\n    }\n  }, [address, uuid]);\n\n  const unsubscribe = useCallback(async () => {\n    dispatch({ type: LOADING, payload: {} });\n    const options = {\n      crossDomain: true,\n      method: 'PATCH',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n    };\n    try {\n      const response = await fetch(`${apiUrl}/users/${address}/${uuid}/unsubscribe`, options);\n      const { status } = response;\n      const message = await response.json();\n      if (status >= 200 && status <= 299) {\n        dispatch({ type: SUCCESS, payload: { message, status } });\n      } else {\n        dispatch({ type: ERROR, payload: { message, status } });\n      }\n    } catch (error) {\n      dispatch({ type: ERROR, payload: error });\n    }\n  }, [apiUrl, address, uuid]);\n\n  return (\n    <>\n      <SEO title={seoTitle} description={seoDescription} />\n      <h1 className=\"sr-only\">{seoTitle}</h1>\n      <Hero>\n        {state.status === INITIAL && (\n          <div className=\"text-center text-primary\">\n            <div className={classes.title}>{content[state.status].title}</div>\n            <div className={classes.bodyText} dangerouslySetInnerHTML={{ __html: content[state.status].body }}></div>\n            <Button\n              onClick={unsubscribe}\n              type=\"button\"\n              className={classes.button}\n              aria-label={`Annulla iscrizione`}\n              color=\"primary\"\n            >\n              {content[state.status].button}\n            </Button>\n          </div>\n        )}\n        {state.status === LOADING && (\n          <div className=\"progress-spinner progress-spinner-active mx-auto mt-5\">\n            <span className=\"sr-only\">Caricamento...</span>\n          </div>\n        )}\n        {state.status === SUCCESS && (\n          <div className=\"text-center text-primary\">\n            <div className={classes.title} dangerouslySetInnerHTML={{ __html: content[state.status].title }}></div>\n            <div className={classes.bodyText} dangerouslySetInnerHTML={{ __html: content[state.status].body }} />\n            <Link to=\"/\" className={classes.button}>\n              {content[state.status].button}\n            </Link>\n          </div>\n        )}\n        {state.status === ERROR && (\n          <div className=\"text-center text-primary\">\n            <div className={classes.title} dangerouslySetInnerHTML={{ __html: content[state.status].title }}></div>\n            <div className={classes.bodyText} dangerouslySetInnerHTML={{ __html: content[state.status].body }} />\n            <Button type=\"button\" className={classes.button} onClick={unsubscribe} color=\"primary\">\n              {content[state.status].button}\n            </Button>\n          </div>\n        )}\n      </Hero>\n    </>\n  );\n};\n\nUnsubscribePage.propTypes = {\n  location: PropTypes.func,\n};\n","import React from 'react';\nimport { UnsubscribePage } from '../layouts/UnsubscribePage';\n\nconst Page = (location) => <UnsubscribePage {...location} />;\nexport default Page;\n"],"names":["Hero","bgColor","xPadding","className","yPaddingXLScreen","Tag","ariaLabelledBy","children","heroClasses","classNames","containerClass","seo","seoTitle","title","seoDescription","description","useStyles","createUseStyles","fontSize","fontWeight","color","marginTop","marginLeft","bodyText","lineHeight","margin","button","composes","minWidth","INITIAL","LOADING","SUCCESS","ERROR","reducer","state","type","payload","status","data","UnsubscribePage","location","classes","params","URLSearchParams","search","address","get","uuid","apiUrl","useStaticQuery","site","siteMetadata","initState","useReducer","dispatch","useEffect","unsubscribe","useCallback","options","crossDomain","method","headers","fetch","response","json","message","SEO","content","dangerouslySetInnerHTML","__html","body","onClick","to"],"sourceRoot":""}