{"version":3,"file":"component---src-pages-conferma-jsx-ed226b599b1a6d0d422b.js","mappings":"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","sources":["webpack://padigitale2026/./src/components/hero/Hero.jsx","webpack://padigitale2026/./node_modules/jwt-decode/build/jwt-decode.esm.js","webpack://padigitale2026/./src/layouts/ConfirmPage.jsx","webpack://padigitale2026/./src/pages/conferma.jsx"],"sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\n\nexport const Hero = ({\n  bgColor = '',\n  xPadding = true,\n  className,\n  yPaddingXLScreen = true,\n  Tag = 'div',\n  ariaLabelledBy,\n  children,\n}) => {\n  const heroClasses = classNames(\n    'py-5',\n    {\n      'bg-primary': bgColor === 'primary',\n      'lightgrey-bg-a2': bgColor === 'light',\n    },\n    className\n  );\n  const containerClass = classNames('container', {\n    'py-3': yPaddingXLScreen,\n    'px-3': xPadding,\n  });\n  return (\n    <div className={heroClasses}>\n      <Tag className={containerClass} aria-labelledby={ariaLabelledBy}>\n        {children}\n      </Tag>\n    </div>\n  );\n};\n\nHero.propTypes = {\n  bgColor: PropTypes.oneOf(['primary', 'light']),\n  xPadding: PropTypes.bool,\n  yPaddingXLScreen: PropTypes.bool,\n  children: PropTypes.node.isRequired,\n  className: PropTypes.string,\n  ariaLabelledBy: PropTypes.string,\n  Tag: PropTypes.string,\n};\n","function e(e) {\n  this.message = e;\n}\n\ne.prototype = new Error(), e.prototype.name = \"InvalidCharacterError\";\n\nvar r = \"undefined\" != typeof window && window.atob && window.atob.bind(window) || function (r) {\n  var t = String(r).replace(/=+$/, \"\");\n  if (t.length % 4 == 1) throw new e(\"'atob' failed: The string to be decoded is not correctly encoded.\");\n\n  for (var n, o, a = 0, i = 0, c = \"\"; o = t.charAt(i++); ~o && (n = a % 4 ? 64 * n + o : o, a++ % 4) ? c += String.fromCharCode(255 & n >> (-2 * a & 6)) : 0) {\n    o = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\".indexOf(o);\n  }\n\n  return c;\n};\n\nfunction t(e) {\n  var t = e.replace(/-/g, \"+\").replace(/_/g, \"/\");\n\n  switch (t.length % 4) {\n    case 0:\n      break;\n\n    case 2:\n      t += \"==\";\n      break;\n\n    case 3:\n      t += \"=\";\n      break;\n\n    default:\n      throw \"Illegal base64url string!\";\n  }\n\n  try {\n    return function (e) {\n      return decodeURIComponent(r(e).replace(/(.)/g, function (e, r) {\n        var t = r.charCodeAt(0).toString(16).toUpperCase();\n        return t.length < 2 && (t = \"0\" + t), \"%\" + t;\n      }));\n    }(t);\n  } catch (e) {\n    return r(t);\n  }\n}\n\nfunction n(e) {\n  this.message = e;\n}\n\nfunction o(e, r) {\n  if (\"string\" != typeof e) throw new n(\"Invalid token specified\");\n  var o = !0 === (r = r || {}).header ? 0 : 1;\n\n  try {\n    return JSON.parse(t(e.split(\".\")[o]));\n  } catch (e) {\n    throw new n(\"Invalid token specified: \" + e.message);\n  }\n}\n\nn.prototype = new Error(), n.prototype.name = \"InvalidTokenError\";\nexport default o;\nexport { n as InvalidTokenError };","import React, { useCallback, useEffect, useReducer } from 'react';\nimport { graphql, Link, useStaticQuery } from 'gatsby';\nimport PropTypes from 'prop-types';\nimport { Button } from 'design-react-kit';\nimport jwt_decode from 'jwt-decode';\nimport { announce } from '@react-aria/live-announcer';\nimport { Hero } from '../components/hero/Hero';\nimport { SEO } from '../components/SEO';\nimport content from '../../contents/confirm-page/confirm.yml';\nimport seo from '../../contents/seo.yml';\n\nconst { title: seoTitle, description: seoDescription } = seo.confirmPage;\n\nconst query = graphql`\n  query {\n    site {\n      siteMetadata {\n        apiUrl\n      }\n    }\n  }\n`;\n\n// use custom hook\nconst LOADING = 'loading';\nconst SUCCESS = 'success';\nconst ERROR = 'error';\n\nconst reducer = (state, { type, payload }) => {\n  if (type === LOADING) {\n    return { status: LOADING };\n  }\n  if (type === ERROR) {\n    return { status: ERROR, data: payload };\n  }\n  if (type === SUCCESS) {\n    return { status: SUCCESS, data: payload };\n  }\n  return state;\n};\n\nconst initState = {\n  status: LOADING,\n};\n\nexport const ConfirmPage = ({ location }) => {\n  const params = new URLSearchParams(location.search);\n  const jwt = params.get('jwt');\n  const {\n    site: {\n      siteMetadata: { apiUrl },\n    },\n  } = useStaticQuery(query);\n  const [state, dispatch] = useReducer(reducer, initState);\n\n  const confirm = useCallback(async () => {\n    if (jwt && !jwt.match(/(^[\\w-]*\\.[\\w-]*\\.[\\w-]*$)/)) {\n      dispatch({\n        type: ERROR,\n        payload: `jwt not present or it seems it is not a valid jwt, ${jwt}`,\n      });\n      return;\n    }\n    const { address, uuid } = jwt_decode(jwt);\n    const options = {\n      crossDomain: true,\n      method: 'PUT',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({ jwt }),\n    };\n    try {\n      const response = await fetch(`${apiUrl}/users/${address}/${uuid}/confirm`, options);\n      const { status } = response;\n      const message = await response.json();\n      if (status >= 200 && status <= 299) {\n        dispatch({ type: SUCCESS, payload: { message, status } });\n      } else {\n        dispatch({ type: ERROR, payload: { message, status } });\n      }\n    } catch (error) {\n      dispatch({ type: ERROR, payload: error });\n    }\n  }, [apiUrl, jwt]);\n\n  useEffect(() => {\n    confirm();\n  }, [confirm]);\n\n  useEffect(() => {\n    announce('Pagina caricata ' + seoTitle);\n  }, []);\n\n  return (\n    <>\n      <SEO title={seoTitle} description={seoDescription} />\n      <h1 className=\"sr-only\">{seoTitle}</h1>\n      <Hero>\n        {state.status === LOADING && (\n          <div className=\"text-center text-primary\">\n            <div className=\"display-3\">{content[state.status].title}</div>\n            <div className=\"progress-spinner progress-spinner-active mx-auto mt-5\">\n              <span className=\"sr-only\">Caricamento...</span>\n            </div>\n          </div>\n        )}\n        {state.status === ERROR && (\n          <div className=\"text-center text-primary\">\n            <div className=\"display-3\">{content[state.status].title}</div>\n            <div className=\"my-4 text-dark\" dangerouslySetInnerHTML={{ __html: content[state.status].body }} />\n            <Button type=\"button\" className=\"btn text-uppercase btn-danger\" onClick={confirm}>\n              {content[state.status].button}\n            </Button>\n          </div>\n        )}\n        {state.status === SUCCESS && (\n          <div className=\"text-center text-primary\">\n            <div className=\"display-3\">{content[state.status].title}</div>\n            <div className=\"my-4 text-dark\" dangerouslySetInnerHTML={{ __html: content[state.status].body }} />\n            <Link to=\"/\" className=\"btn text-uppercase btn-primary\">\n              {content[state.status].button}\n            </Link>\n          </div>\n        )}\n      </Hero>\n    </>\n  );\n};\n\nConfirmPage.propTypes = {\n  location: PropTypes.func,\n};\n","import React from 'react';\nimport { ConfirmPage } from '../layouts/ConfirmPage';\n\nconst Page = (location) => <ConfirmPage {...location} />;\nexport default Page;\n"],"names":["Hero","bgColor","xPadding","className","yPaddingXLScreen","Tag","ariaLabelledBy","children","heroClasses","classNames","containerClass","e","this","message","prototype","Error","name","r","window","atob","bind","t","String","replace","length","n","o","a","i","c","charAt","fromCharCode","indexOf","decodeURIComponent","charCodeAt","toString","toUpperCase","header","JSON","parse","split","seo","seoTitle","title","seoDescription","description","LOADING","SUCCESS","ERROR","reducer","state","type","payload","status","data","initState","ConfirmPage","location","jwt","URLSearchParams","search","get","apiUrl","useStaticQuery","site","siteMetadata","useReducer","dispatch","confirm","useCallback","match","jwt_decode","address","uuid","options","crossDomain","method","headers","body","stringify","fetch","response","json","useEffect","announce","SEO","content","dangerouslySetInnerHTML","__html","onClick","button","to"],"sourceRoot":""}